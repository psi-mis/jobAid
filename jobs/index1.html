<html>

<head>
  <title>Job Aids</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />

  <link href="./css/style.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="./scripts/libraries/jquery-3.4.1.min.js"></script>
  <script src="./scripts/libraries/jquery-ui.js"></script>

  <script>

    // ===========================
    // === Msg sending & receiving between parent WFA app.

    const jobAidsVersion = 'v0.5.7'
    const buildDate = 'Mar 22, 2022'
    const downloadSize = '0.04 GB'
    const availableVersions = [
      /* {language:"English", code:"EN"}, */
      {language:"Amharic", code:"AM"},
      {language:"Oromiffa", code:"OM"}
    ]

    var mainData = {};

    // [Msg] - Handle the msg actions sent from parent  
    window.addEventListener('message', function (event) 
    {
      if ( event.data.actions ) event.data.actions.forEach( act => handleMsgAction( act ) );
      
      if ( event.data.action ) handleMsgAction( event.data.action );
    });

    function handleMsgAction( action )
    {
      if ( action )
      {
        try {
          if ( action.callBackEval ) eval( action.callBackEval );
        }
        catch ( errMsg ) { console.log( 'ERROR in handleMsgAction, ' + errMsg ); }
      }
    };

    // ------------------------

    // On Start, ask WFA for jobAid FolderNames
    window.parent.postMessage( { 'from': 'jobAidIFrame', 'actions': [ 
      { name: 'getJobFolderNames', callBackEval: ' mainData.folderData = action.data; ' }, 
      { name: 'getCountryCode_NoT', callBackEval: ' mainData.countryCode = action.data; ' } 
    ] }, '*');

  /*   window.parent.postMessage( { 'from': 'jobAidIFrame', 'action': 
      { name: 'WFARunEval',
        WFARunEval: [ 
          '		var clientList = ClientDataManager.getClientListByFields( action.data ); ',
          ' { callBackEval: action.callBackEval, data: clientList };'
        ],
        callBackEval: 'clientsFound( action.data );', 
        data: { firstName: 'Tester', lastName: 'Last' } } 
    }, '*' ); */


    // ===========================================


    $(document).ready( function() {

      $( '.divPageReload' ).click( function(e) {
        e.preventDefault;
        e.stopPropagation();
        location.reload(true);
      });

      $('#btnPageClose').click(function () {
        var data = { 'from': 'jobAidIFrame', 'action': 'hideIFrame' };
        window.parent.postMessage(data, '*');
      });

      $( '.exitJobAids' ).click( function() {
        var data = { 'from': 'jobAidIFrame', 'action': 'hideIFrame' };
        window.parent.postMessage(data, '*');
      });

      // ================================================================

      /**
      * BUILD SMART START LIST
      */ 

      availableVersions.forEach(lang => $('.list').append(
        `
        <div class="card smartStart" data-language="${lang.code}">
          <div class="card__container">
            <card__support_visuals class="card__support_visuals">
              <img src="./images/JobAidicons.svg">
            </card__support_visuals>
            <card__content class="card__content">
              <div class="card__row"><strong>Smart Start ${jobAidsVersion} [${lang.language}]</strong></div>
              <div class="card__row"><strong>Release date:</strong> ${buildDate}</div>
              <div class="card__row"><strong>Download size:</strong> ${downloadSize}</div>
            </card__content>
          </div>
        </div>
      `
      ))

      /**
      * LAUNCH SMART START 
      */

      $(".smartStart").click(function () 
      {
        const language = $(this).data('language').toUpperCase()
        $(".Nav1").hide();
        $(".list").hide();
        $("Body").css({"background-image": "none"});

        var fdnJson = mainData.folderData;
        //var folderName = ( fdnJson && fdnJson.react1 ) ? fdnJson.react1: 'v0.4.1';
        //var folderName = 'v0.5.0';

        //window.location.href = folderName + `/${language}/index.html`;
        window.location.href = jobAidsVersion + `/${language}/index.html`;
      });

      // ================================================================

      var vw = $(window).width();
      var vh = $(window).height();

      //////////////////////////////////////////////////////////////////////////////////////////////
      /*------------------------------------*\
            #AppBarTop 
        \*------------------------------------*/
      $('.Nav__icon').click(function () {
        // media NavDrawer
        if (vw <= 360) {
          $('.navigation').css('width', '100%');
        } else {
          $('.navigation').css('width', '300px');
        }
        $('.scrim').show();
      });


      /*------------------------------------*\
          #NavDrawer 
      \*------------------------------------*/
      $('.navigation').height(vh - 5);
      $('.navigation__items').height(vh - 120);

      $(".navigation__close").click(function () {
        $('.navigation').width(0);
        $('.scrim').css('display', 'none');
      });

      $(".scrim").click(function () {
        $('.navigation').width(0);
        $('.scrim').css('display', 'none');
      });

      $("a").click(function () {
        $('.navigation').width(0);
        $('.scrim').css('display', 'none');
      });
      //////////////////////////////////////////////////////////////////////////////////////////////
    });
  </script>

</head>

<body class="theme-light_green">
  <div class="navigation">
    <div class="navigation__header">
      <div class="navigation__logo"></div>
      <div class="navigation__user">JobAids</div>
      <div class="navigation__close"></div>
    </div>
    <div class="navigation__items">
      <ul>
        <hr />
        <li>
          <div class="items exitJobAids"><img src="./images/logout.svg"> <a>Exit JobAids</a></div>
        </li>
      </ul>
    </div>
  </div>
  <div class="Nav1">
    <div class="Nav__icon">
      <?xml version="1.0" encoding="UTF-8" standalone="no"?>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" version="1.1" id="menu_app">
        <path class="menu-icon" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
      </svg>
    </div>
    <div class="Nav__Title"><div class="divPageReload" style=" cursor: pointer;">Job Aids Apps</div></div>
    <div class="Nav__sync">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path class="Nav__sync-d"
          d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z"
          fill="white" />
        <path class="Nav__sync-s"
          d="M12 4V1L8 5L12 9V6C15.31 6 18 8.69 18 12C18 13.01 17.75 13.97 17.3 14.8L18.76 16.26C19.54 15.03 20 13.57 20 12C20 7.58 16.42 4 12 4ZM12 18C8.69 18 6 15.31 6 12C6 10.99 6.25 10.03 6.7 9.2L5.24 7.74C4.46 8.97 4 10.43 4 12C4 16.42 7.58 20 12 20V23L16 19L12 15V18Z"
          fill="#333333" />
      </svg>
    </div>
    <div class="Nav__status">
      <svg class="online_nav" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path class="online_nav-cloud"
          d="M19.35 10.04C18.67 6.59 15.64 4 12 4C9.11 4 6.6 5.64 5.35 8.04C2.34 8.36 0 10.91 0 14C0 17.31 2.69 20 6 20H19C21.76 20 24 17.76 24 15C24 12.36 21.95 10.22 19.35 10.04ZM19 18H6C3.79 18 2 16.21 2 14C2 11.79 3.79 10 6 10H6.71C7.37 7.69 9.48 6 12 6C15.04 6 17.5 8.46 17.5 11.5V12H19C20.66 12 22 13.34 22 15C22 16.66 20.66 18 19 18Z"
          fill="white" />
        <ellipse class="online_nav-i" cx="5.11111" cy="14.1852" rx="1.11111" ry="1.18518" fill="#FBFBFB" />
        <ellipse class="online_nav-s" cx="8.96267" cy="14.1852" rx="1.11111" ry="1.18518" fill="#FBFBFB" />
      </svg>

      <svg class="offline_nav" width="24" height="24" viewBox="0 0 24 24" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path class="offline_nav-cloud"
          d="M19.35 10.04C18.67 6.59 15.64 4 12 4C10.52 4 9.15 4.43 7.99 5.17L9.45 6.63C10.21 6.23 11.08 6 12 6C15.04 6 17.5 8.46 17.5 11.5V12H19C20.66 12 22 13.34 22 15C22 16.13 21.36 17.11 20.44 17.62L21.89 19.07C23.16 18.16 24 16.68 24 15C24 12.36 21.95 10.22 19.35 10.04ZM3 5.27L5.75 8.01C2.56 8.15 0 10.77 0 14C0 17.31 2.69 20 6 20H17.73L19.73 22L21 20.73L4.27 4L3 5.27ZM7.73 10L15.73 18H6C3.79 18 2 16.21 2 14C2 11.79 3.79 10 6 10H7.73Z"
          fill="white" />
        <ellipse class="offline_nav-i" cx="5.11111" cy="14.1852" rx="1.11111" ry="1.18518" fill="#FBFBFB" />
        <ellipse class="offline_nav-s" cx="8.96267" cy="14.1852" rx="1.11111" ry="1.18518" fill="#FBFBFB" />
      </svg>
    </div>
  </div>

  <div class="wrapper">
    <div class="list">
      <!-- EN -->
      <!-- <div class="card smartStart" data-language="EN">
        <div class="card__container">
          <card__support_visuals class="card__support_visuals">
            <img src="./images/JobAidicons.svg">
          </card__support_visuals>
          <card__content class="card__content">
            <div class="card__row"><strong>Smart Start v0.5.1 [English]</strong></div>
            <div class="card__row"><strong>Release date:</strong> Mar 17, 2022</div>
            <div class="card__row"><strong>Download size:</strong> 0.04 GB</div>
          </card__content>
        </div>
      </div> -->
      <!-- AM -->
      <!-- <div class="card smartStart" data-language="AM">
        <div class="card__container">
          <card__support_visuals class="card__support_visuals">
            <img src="./images/JobAidicons.svg">
          </card__support_visuals>
          <card__content class="card__content">
            <div class="card__row"><strong>Smart Start v0.5.2 [Amharic]</strong></div>
            <div class="card__row"><strong>Release date:</strong> Mar 18, 2022</div>
            <div class="card__row"><strong>Download size:</strong> 0.04 GB</div>
          </card__content>
        </div>
      </div> -->
      <!-- OM -->
      <!-- <div class="card smartStart" data-language="OM">
        <div class="card__container">
          <card__support_visuals class="card__support_visuals">
            <img src="./images/JobAidicons.svg">
          </card__support_visuals>
          <card__content class="card__content">
            <div class="card__row"><strong>Smart Start v0.5.2 [Oromo]</strong></div>
            <div class="card__row"><strong>Release date:</strong> Mar 18, 2022</div>
            <div class="card__row"><strong>Download size:</strong> 0.04 GB</div>
          </card__content>
        </div>
      </div> -->
    </div>
  </div>
  <div class="scrim"></div>
</body>

</html>